---
title: Creating a Custom Egg
description: Learn how to create custom eggs for Pelican Panel
---

:::warning
You should not edit existing eggs or options that ship with the Panel. Each upgrade we push can make minor changes to these, and you'll lose any changes you've made, instead you should replicate one using the dedicated button and then make your changes. 
:::

## Table of Contents

## Create New Egg

Navigate to the Admin Panel and click the eggs option in the sidebar then select `New Egg` button.

You will be taken to a new egg configuration page which is where most of the configuration happens.

### Name
This is the name of your Egg

### Author
This is the orignal Creator of the Egg. 

### Description
This is the discription of your egg and what is needed to run your egg. 

### Startup Commands
Here you can assign multiple Starup commands to run your server 
Example Below
```bash
java -Xms128M -XX:MaxRAMPercentage=95.0 -Dterminal.jline=false -Dterminal.ansi=true -jar {{SERVER_JARFILE}}
```
### File Denylist
Here you can specify a list of files that the end user is not allowed to edit.

### Features (Egg Features)
Egg feature can do diffrent things when specifyed. Example Below
| Tag                       | Description                                 |
| ------------------------- | ------------------------------------------- |
| eula                      | Makes a popup for excepting eula            |
| java_version              | Specifys the java version                   |
| pid_limit                 | Is setting that restricts the maximum number of processes that can run within a container or on a system |

### Tags
The tag system is a system that you can use to group eggs together as the same egg type. This is the secsessor to nests. 

### Update URL
This can be specifyed so that users that use your egg can Update the egg without having to look around for where the egg is hosted. 

### Docker Images
For every egg there is always a docker image. They can be custom made and you can find how to make them from the "Creating a custom image guide". They have two variables that need defined. The name of the image and the url that the image is hosted on.  

:::info
Docker images must be specifically designed to work with Pelican Panel. You should read more about that in our Creating a Docker Image guide.
:::

## Configure Process Management

This is perhaps the most important step in egg configuration, as this tells Wings how to run everything.

The first field you'll encounter is `Copy Settings From`. The default selection is `None`. That is expected, and okay. This dropdown is discussed at the end of this article.

### Stop Command

Next, you'll encounter `Stop Command` and, as the name implies, this should be the command used to safely stop the server. For some games, this is `stop` or `end`. Certain programs and games don't have a specified stop command, so you can enter `^C` to have Wings execute a `SIGINT` to end the process.

### Log Storage

Logs are completely handled by Wings and use Docker logs to output the complete output from the server. This can be set like below:

```json
{}
```

### Configuration Files

The next block is one of the most complex blocks, the `Configuration Files` descriptor. Wings will process this block prior to booting the server to ensure all of the required settings are defined and set correctly.

```json
{
    "server.properties": {
        "parser": "properties",
        "find": {
            "server-ip": "0.0.0.0",
            "enable-query": "true",
            "server-port": "{{server.build.default.port}}",
            "query.port": "{{server.build.default.port}}"
        }
    }
}
```

In this example, we are telling Wings to read `server.properties` in `/home/container`. Within this block, we define a `parser`, in this case `properties` but the following are valid parsers:

- `file` — This parser goes based on matching the beginning of lines, and not a specific property like the other five. Avoid using this parser if possible.
- `yaml` (supports `*` notation)
- `properties`
- `ini`
- `json` (supports `*` notation)
- `xml`

Once you have defined a parser, we then define a `find` block which tells Wings what specific elements to find and replace. In this example, we have provided four separate items within the `server.properties` file that we want to find and replace to the assigned values. You can use either an exact value, or define a specific server setting from the server configuration. In this case, we're assigning the default server port to be used as the `server-port` and `query.port`. **These placeholders are case sensitive, and should have no spaces in them.**

You can have multiple files listed here, Wings will process them in parallel before starting the server. When using `yaml` or `json` you can use more advanced searching for elements.

```json
{
    "config.yml": {
        "parser": "yaml",
        "find": {
            "listeners[0].query_enabled": true,
            "listeners[0].query_port": "{{server.build.default.port}}",
            "listeners[0].host": "0.0.0.0:{{server.build.default.port}}",
            "servers.*.address": {
                "127.0.0.1": "{{config.docker.interface}}",
                "localhost": "{{config.docker.interface}}"
            }
        }
    }
}
```

In this example, we are parsing `config.yml` using the `yaml` parser. The first three find items are simply assigning ports and IPs for the first listener block. The last one, `servers.*.address` uses wildcard matching to match any items within the `servers` block, and then finding each `address` block for those items.

An advanced feature of this file configuration is the ability to define multiple find and replace statements for a single matching line. In this case, we are looking for either `127.0.0.1` or `localhost` and replacing them with the docker interface defined in the configuration file using `{{config.docker.interface}}`.

### Start Configuration

The last block to configure is the `Start Configuration` for servers running using this egg.

```json
{
    "done": ")! For help, type "
}
```

In the example block above, we define `done` as the entire line, or part of a line that indicates a server is done starting, and is ready for players to join. When Wings sees this output, it will mark the server as `RUNNING` rather than `STARTING`.

That concludes basic egg configuration.

## Copy Settings From

As mentioned above, there is a unique `Copy Settings From` dropdown when adding a new egg. This gives you the ability to, as the name suggests, copy settings defined above from a different egg.

In the panel, we use this to copy settings that remain the same between similar eggs, such as many of the Minecraft eggs.

## Egg Variables

One of the great parts of Egg Variables is the ability to define specific variables that users and/or admins can control to tweak different settings without letting users modify the startup command. To create new variables, or edit existing ones, visit the egg you created, and click the `Variables` tab at the top of the page. Let's take a look at an example variable that we can create.

The name and description are rather self-explanatory, so I'll skip down to the `Environment Variable` box. This should be an alphanumeric name with underscores, and should be uppercase. This will be the name of the environment variable which can be accessed in the startup command as `{{WOOZLE_WOO}}`, within file modifications as `{{env.WOOZLE_WOO}}`, or just `${WOOZLE_WOO}` in any shell scripts (it is passed through in the environment). We also define a default value for this environment variable in this example, but it is not required to do so.

The next section is `Permissions`, which is a dropdown with two options: `Users Can View` and `Users Can Edit`.

- `Users Can View` — allows a user to view the field on the front-end, as well as the assigned value of that variable. They will be able to see it replaced in their startup command.
- `Users Can Edit` — allows a user to edit the value of the variable, for example the name of their `server.jar` file if running Minecraft.

You should use caution here, even if you assign neither of the permissions it does not mean that the value will be hidden. Crafty users will still be able to get the environment on their server. In most cases this is simply hiding it from the user, and then used within the Dockerfile to perform actions, thus it is not important for the user to see.

Finally, you will need to define some input rules to validate the value against. In this example, we use `required|string|between:1,10`, which means the field is `required`, must be a `string`, and must be between `1` and `10` characters in length. You can find all of the available validation rules on the Laravel website. You can also use regex based validation by using the `regex:` rule flag. For example, `required|regex:/^([\w\d._-]+)(\.jar)$/` will require the field, and will match the regex as any letters or numbers (`\w\d`) including underscore (`_`), periods (`.`), and dashes (`-`) ending in `.jar`.

They will then be visible when managing the startup for a server in both the Admin CP and on the Front-End.

## List of Default Variables

The default variables are always accessible to all eggs and don't have to be created separately. They can be used in the egg startup, install script, or the configuration file parser. Below are an example of a few. 

| Variable                  | Description                                 | Example                                                        |
| ------------------------- | ------------------------------------------- | -------------------------------------------------------------- |
| TZ                        | Time Zone                                   | `Etc/UTC`                                                      |
| STARTUP                   | Startup command of the egg                  | `java -Xms128M -Xmx{{SERVER_MEMORY}}M -jar {{SERVER_JARFILE}}` |
| SERVER_MEMORY             | Memory available for the server in MB       | `512`                                                          |
| SERVER_IP                 | Default IP of the server                    | `127.0.0.1`                                                    |
| SERVER_PORT               | Primary Server Port                         | `27015`                                                        |
| P_SERVER_LOCATION         | Location of the server                      | `Example City`                                                 |
| P_SERVER_UUID             | UUID of the server                          | `539fdca8-4a08-4551-a8d2-8ee5475b50d9`                         |
| P_SERVER_ALLOCATION_LIMIT | Limit of allocations allowed for the server | `0`                                                            |
